검색어 자동 완성 시스템
-

1. 데이터(질의) 수집 서비스
2. 질의 서비스

트라이 자료구조
-
RDB는 효율적이지 않다.
트라이는 문자열들을 간략하게 저장할 수 있는 자료구조, 문자열을 꺼내는 연산에 초점을 맞추어 설계된 자료구조이다.

- 트리 형태의 자료구조
- 루트 노드는 빈 문자열을 나타냄
- 각 노드는 글자 하나를 저장하며 26개의 자식 노드를 가질 수 있음
- 각 트리 노드는 하나의 단어, 또는 접두어 문자열을 나타냄

가장 많이 사용된 질의어 k개는 다음과 같이 찾을 수 있다.

1. 해당 접두어를 표현하는 노드를 찾는다. 시간복잡도 O(p)
2. 해당 노드부터 시작하는 하위 트리를 탐색하여 모든 유효 노드를 찾는다. 시간복잡도 O(c)
3. 유효 노드들을 정렬하여 가장 인기 있는 검색어 k개를 찾는다. 시간복잡도 O(clogc)

병목이 생길 때 생각해 봄직 한 요소

- 접두어의 최대 길이를 제한
- 각 노드에 인기 검색어를 캐시

일단 트라이가 만들어지고 나면 인기 검색어는 그다지 자주 바뀌지 않을 것이라는 가정 아래, 궁극적 일관성 모델을 사용하는 것도 하나의 방법

큰 구조 설계
-
데이터 분석 서비스 로그 -> 로그 취합 서버 -> 취합된 데이터 -> 작업 서버 -> 트라이 데이터 베이스 -> 트라이 캐시

데이터 분석 서비스 로그
-

검색창에 입력된 질의에 관한 원본 데이터가 보관.

데이터가 추가될 뿐 수정은 이루워지지 않으며 로그 데이터에는 인덱스를 걸지 않는다.
